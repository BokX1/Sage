datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model UserProfile {
  userId    String   @id
  summary   String   @default("") // Compressed memory: preferences, stable facts
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}

model ChannelMessage {
  messageId         String   @id
  guildId           String?
  channelId         String
  authorId          String
  authorDisplayName String
  timestamp         DateTime
  content           String   @db.Text
  replyToMessageId  String?
  mentionsUserIds   Json
  mentionsBot       Boolean  @default(false)

  @@index([guildId, channelId, timestamp])
}

